# auth-domain-tests

## タスク
auth/shared ドメインモデルのユニットテスト作成

## 作成・変更ファイル
- `apps/content-reviewer/src/backend/contexts/auth/domain/models/user.model.ts` — interface → class に変換、create/createDummy/fromSupabaseUser ファクトリメソッド追加
- `apps/content-reviewer/src/backend/contexts/auth/domain/models/__tests__/user.model.test.ts` — User モデルテスト（17件: create正常系/バリデーション/createDummy/fromSupabaseUser）
- `apps/content-reviewer/src/backend/contexts/shared/domain/models/__tests__/email.model.test.ts` — Email値オブジェクトテスト（12件）
- `apps/content-reviewer/src/backend/contexts/shared/domain/models/__tests__/user-id.model.test.ts` — UserIdテスト（4件）
- `apps/content-reviewer/vitest.unit.config.ts` — `src/**/__tests__/**/*.test.ts` パスを追加

## 設計判断
- User を interface から Rich Domain Model（class）に変換。architecture.md の「Anemic Domain Model 禁止」に準拠
- SupabaseUser 型を user.model.ts 内に定義。Supabase SDK への依存を domain 層に持ち込まないため、独自の型で受け取る
- fromSupabaseUser は full_name → name → email の順でフォールバック。Google OAuth の user_metadata 構造に対応
- vitest.unit.config.ts に `src/**/__tests__/` パスを追加し、colocation テストと test/unit/ の両方をサポート

## 次のタスクへの申し送り
- auth.gateway.ts、user.repository.ts は `import type { User }` のため、class 化による breaking change なし
- test/unit/ 配下の既存 Email/UserId テストはそのまま残存（重複あるが削除は別タスクで判断）
